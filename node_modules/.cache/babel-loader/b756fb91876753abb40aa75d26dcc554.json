{"ast":null,"code":"import _classCallCheck from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from'react-redux';import{deleteLocationSuccess}from'../actions/location';import Card from'@material-ui/core/Card';import CardActionArea from'@material-ui/core/CardActionArea';import CardActions from'@material-ui/core/CardActions';import CardContent from'@material-ui/core/CardContent';import DeleteIcon from'@material-ui/icons/Delete';import IconButton from'@material-ui/core/IconButton';import RoomIcon from'@material-ui/icons/Room';export var UserLocations=/*#__PURE__*/function(_Component){_inherits(UserLocations,_Component);var _super=_createSuper(UserLocations);function UserLocations(){var _this;_classCallCheck(this,UserLocations);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={usersLocations:false};_this.handleDelete=function(id){console.log('i was clicked!');var reqObj={method:'DELETE',headers:{'Content-Type':'application/json'}};fetch(\"http://localhost:3001/locations/\".concat(id),reqObj).then(function(resp){return resp.json();}).then(function(data){console.log(data);_this.props.deleteLocationSuccess(id);_this.setState({usersLocations:_this.state.usersLocations.filter(function(loc){return loc.id!==data.id;})});});};return _this;}_createClass(UserLocations,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;fetch('http://localhost:3001/locations').then(function(resp){return resp.json();}).then(function(locations){console.log(_this2.props);console.log(_this2.state);var myLocations=locations.filter(function(loc){return loc.user_id===_this2.props.auth.id;});console.log(myLocations);_this2.setState({usersLocations:myLocations});});}},{key:\"render\",value:function render(){var _this3=this;console.log(this.state);if(this.state.usersLocations===false){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"You have no saved locations.\"));}else{return this.state.usersLocations.map(function(location){return/*#__PURE__*/React.createElement(\"div\",{className:\"location-card\"},/*#__PURE__*/React.createElement(Card,{className:\"hovered-location\",variant:\"outlined\"},/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(\"div\",{class:\"loc-card-name\"},/*#__PURE__*/React.createElement(\"span\",{style:{'font-size':'18px'}},location.name)),/*#__PURE__*/React.createElement(\"div\",{class:\"loc-icons\"},/*#__PURE__*/React.createElement(IconButton,{className:\"delete-btn\",onClick:function onClick(){return _this3.handleDelete(location.id);},color:\"white\",\"aria-label\":\"delete\"},/*#__PURE__*/React.createElement(DeleteIcon,null)),/*#__PURE__*/React.createElement(IconButton,{className:\"go-btn\",onClick:function onClick(){return _this3.props.clicked(location);},color:\"white\",\"aria-label\":\"delete\"},/*#__PURE__*/React.createElement(RoomIcon,null))))));});}}}]);return UserLocations;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};var mapDispatchToProps={deleteLocationSuccess:deleteLocationSuccess};export default connect(mapStateToProps,mapDispatchToProps)(UserLocations);","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/UserLocations.js"],"names":["React","Component","connect","deleteLocationSuccess","Card","CardActionArea","CardActions","CardContent","DeleteIcon","IconButton","RoomIcon","UserLocations","state","usersLocations","handleDelete","id","console","log","reqObj","method","headers","fetch","then","resp","json","data","props","setState","filter","loc","locations","myLocations","user_id","auth","map","location","name","clicked","mapStateToProps","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from 'react-redux'\nimport { deleteLocationSuccess } from '../actions/location'\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport IconButton from '@material-ui/core/IconButton';\nimport RoomIcon from '@material-ui/icons/Room';\n\n\nexport class UserLocations extends Component {\n\n  state={\n    usersLocations: false\n  }\n\n  componentDidMount(){\n    fetch('http://localhost:3001/locations')\n    .then(resp => resp.json())\n    .then(locations => {\n      console.log(this.props)\n      console.log(this.state)\n      const myLocations = locations.filter(loc => loc.user_id === this.props.auth.id)\n      console.log(myLocations)\n      this.setState({usersLocations: myLocations})\n    })\n  }\n\n  handleDelete = (id) => {\n    console.log('i was clicked!')\n    const reqObj = {\n      method: 'DELETE',\n      headers: {\n        'Content-Type':  'application/json',\n      }\n    }\n    fetch(`http://localhost:3001/locations/${id}`, reqObj)\n    .then(resp => resp.json())\n    .then(data => {\n      console.log(data)\n      this.props.deleteLocationSuccess(id)\n      this.setState({\n        usersLocations: this.state.usersLocations.filter((loc => loc.id !== data.id))\n      })\n    })\n  }\n\n  render(){\n    console.log(this.state)\n    if (this.state.usersLocations === false){\n      return <div><h4>You have no saved locations.</h4></div>\n    } else {\n    return this.state.usersLocations.map((location)=>{\n      return <div className='location-card'>\n        <Card className={\"hovered-location\"} variant='outlined'>\n          <CardContent>\n            <div class='loc-card-name'>\n        <span style={{'font-size': '18px'}}>{location.name}</span>\n        </div>\n        <div class='loc-icons'>\n        <IconButton className={\"delete-btn\"} onClick={()=>this.handleDelete(location.id)} color=\"white\" aria-label=\"delete\">\n        <DeleteIcon />\n          </IconButton>\n          <IconButton className={\"go-btn\"} onClick={()=>this.props.clicked(location)} color=\"white\" aria-label=\"delete\">\n        <RoomIcon />\n          </IconButton>\n        </div>\n        </CardContent>\n        </Card>\n      </div>\n      })\n    }\n  }\n\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n  }\n}\n\nconst mapDispatchToProps = {\n  deleteLocationSuccess\n}\n  \nexport default connect(mapStateToProps, mapDispatchToProps)(UserLocations);"]},"metadata":{},"sourceType":"module"}