{"ast":null,"code":"var _jsxFileName = \"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/Dashboard.js\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchLocationsSuccess } from \"../actions/location\";\nimport { fetchStatSuccess } from \"../actions/stat\";\nimport { fetchCitiesSuccess } from \"../actions/city\";\nimport { currentUser } from \"../actions/auth\";\nimport ClimateMap from \"./ClimateMap\";\nimport climScores from \"./climScores.json\";\n\nclass Dashboard extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      climateScores: climScores\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\"); // if (!token) {\n    //   this.props.history.push(\"/login\");\n    // } else {\n\n    const reqObj = {\n      method: \"GET\",\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n\n    if (token) {\n      fetch(\"https://myclimate.herokuapp.com/current_user\", reqObj).then(resp => resp.json()).then(data => {\n        this.props.currentUser(data);\n      });\n    }\n\n    fetch(\"https://api.waqi.info/map/bounds/?latlng=85,-180,-85.05115,180&token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c\").then(resp => resp.json()).then(stations => {\n      let y = stations.data;\n      let x = stations.data.slice(0, 4500);\n      this.props.fetchStatSuccess(y);\n    }); // }\n  }\n\n  render() {\n    if (this.props.stats.length !== 0) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ClimateMap, {\n        cities: this.props.cities,\n        climateScores: this.state.climateScores,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }\n      }));\n    } else {\n      return null;\n    }\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser,\n    locations: state.locations,\n    stats: state.stats,\n    cities: state.cities\n  };\n};\n\nconst mapDispatchToProps = {\n  fetchLocationsSuccess,\n  fetchStatSuccess,\n  fetchCitiesSuccess,\n  currentUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/Dashboard.js"],"names":["React","connect","fetchLocationsSuccess","fetchStatSuccess","fetchCitiesSuccess","currentUser","ClimateMap","climScores","Dashboard","Component","state","climateScores","componentDidMount","token","localStorage","getItem","reqObj","method","headers","Authorization","fetch","then","resp","json","data","props","stations","y","x","slice","render","stats","length","cities","mapStateToProps","auth","current_user","locations","mapDispatchToProps"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,qBAAT,QAAsC,qBAAtC;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,SAASC,kBAAT,QAAmC,iBAAnC;AACA,SAASC,WAAT,QAA4B,iBAA5B;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,mBAAvB;;AAEA,MAAMC,SAAN,SAAwBR,KAAK,CAACS,SAA9B,CAAwC;AAAA;AAAA;AAAA,SACtCC,KADsC,GAC9B;AACNC,MAAAA,aAAa,EAAEJ;AADT,KAD8B;AAAA;;AAKtCK,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CADkB,CAElB;AACA;AACA;;AACE,UAAMC,MAAM,GAAG;AACbC,MAAAA,MAAM,EAAE,KADK;AAEbC,MAAAA,OAAO,EAAE;AACPC,QAAAA,aAAa,EAAG,UAASN,KAAM;AADxB;AAFI,KAAf;;AAMA,QAAIA,KAAJ,EAAU;AACRO,MAAAA,KAAK,CAAC,8CAAD,EAAiDJ,MAAjD,CAAL,CACGK,IADH,CACSC,IAAD,IAAUA,IAAI,CAACC,IAAL,EADlB,EAEGF,IAFH,CAESG,IAAD,IAAU;AACd,aAAKC,KAAL,CAAWpB,WAAX,CAAuBmB,IAAvB;AACD,OAJH;AAKD;;AACDJ,IAAAA,KAAK,CACH,+GADG,CAAL,CAGGC,IAHH,CAGSC,IAAD,IAAUA,IAAI,CAACC,IAAL,EAHlB,EAIGF,IAJH,CAISK,QAAD,IAAc;AAClB,UAAIC,CAAC,GAAGD,QAAQ,CAACF,IAAjB;AACA,UAAII,CAAC,GAAGF,QAAQ,CAACF,IAAT,CAAcK,KAAd,CAAoB,CAApB,EAAuB,IAAvB,CAAR;AACA,WAAKJ,KAAL,CAAWtB,gBAAX,CAA4BwB,CAA5B;AACD,KARH,EAlBgB,CA2BlB;AACD;;AAEDG,EAAAA,MAAM,GAAG;AACP,QAAI,KAAKL,KAAL,CAAWM,KAAX,CAAiBC,MAAjB,KAA4B,CAAhC,EAAmC;AACjC,0BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,UAAD;AACE,QAAA,MAAM,EAAE,KAAKP,KAAL,CAAWQ,MADrB;AAEE,QAAA,aAAa,EAAE,KAAKvB,KAAL,CAAWC,aAF5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADF;AAQD,KATD,MASO;AACL,aAAO,IAAP;AACD;AACF;;AAhDqC;;AAmDxC,MAAMuB,eAAe,GAAIxB,KAAD,IAAW;AACjC,SAAO;AACLyB,IAAAA,IAAI,EAAEzB,KAAK,CAACyB,IADP;AAELC,IAAAA,YAAY,EAAE1B,KAAK,CAACL,WAFf;AAGLgC,IAAAA,SAAS,EAAE3B,KAAK,CAAC2B,SAHZ;AAILN,IAAAA,KAAK,EAAErB,KAAK,CAACqB,KAJR;AAKLE,IAAAA,MAAM,EAAEvB,KAAK,CAACuB;AALT,GAAP;AAOD,CARD;;AAUA,MAAMK,kBAAkB,GAAG;AACzBpC,EAAAA,qBADyB;AAEzBC,EAAAA,gBAFyB;AAGzBC,EAAAA,kBAHyB;AAIzBC,EAAAA;AAJyB,CAA3B;AAOA,eAAeJ,OAAO,CAACiC,eAAD,EAAkBI,kBAAlB,CAAP,CAA6C9B,SAA7C,CAAf","sourcesContent":["import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { fetchLocationsSuccess } from \"../actions/location\";\nimport { fetchStatSuccess } from \"../actions/stat\";\nimport { fetchCitiesSuccess } from \"../actions/city\";\nimport { currentUser } from \"../actions/auth\";\nimport ClimateMap from \"./ClimateMap\";\nimport climScores from \"./climScores.json\";\n\nclass Dashboard extends React.Component {\n  state = {\n    climateScores: climScores,\n  };\n\n  componentDidMount() {\n    const token = localStorage.getItem(\"token\");\n    // if (!token) {\n    //   this.props.history.push(\"/login\");\n    // } else {\n      const reqObj = {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      };\n      if (token){\n        fetch(\"https://myclimate.herokuapp.com/current_user\", reqObj)\n          .then((resp) => resp.json())\n          .then((data) => {\n            this.props.currentUser(data);\n          });\n      }\n      fetch(\n        \"https://api.waqi.info/map/bounds/?latlng=85,-180,-85.05115,180&token=87b2bba6a5b2e26c577ffc48e297eaed82a8408c\"\n      )\n        .then((resp) => resp.json())\n        .then((stations) => {\n          let y = stations.data;\n          let x = stations.data.slice(0, 4500);\n          this.props.fetchStatSuccess(y);\n        });\n    // }\n  }\n\n  render() {\n    if (this.props.stats.length !== 0) {\n      return (\n        <div>\n          <ClimateMap\n            cities={this.props.cities}\n            climateScores={this.state.climateScores}\n          />\n        </div>\n      );\n    } else {\n      return null;\n    }\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser,\n    locations: state.locations,\n    stats: state.stats,\n    cities: state.cities,\n  };\n};\n\nconst mapDispatchToProps = {\n  fetchLocationsSuccess,\n  fetchStatSuccess,\n  fetchCitiesSuccess,\n  currentUser,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\n"]},"metadata":{},"sourceType":"module"}