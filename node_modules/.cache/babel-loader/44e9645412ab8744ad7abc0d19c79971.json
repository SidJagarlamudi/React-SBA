{"ast":null,"code":"var _jsxFileName = \"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/NewsFeed.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { fetchLocationsSuccess } from '../actions/location';\nimport { fetchStatSuccess } from '../actions/stat';\nimport { fetchCitiesSuccess } from '../actions/city';\nimport { currentUser } from '../actions/auth';\nimport ClimateMap from './ClimateMap';\nimport Geocode from \"react-geocode\";\nimport climScores from './climScores.json';\nimport NewsCard from './NewsCard';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar';\nimport InfoIcon from '@material-ui/icons/Info';\nimport IconButton from \"@material-ui/core/IconButton\";\n\nclass NewsFeed extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      newsArticles: []\n    };\n\n    this.renderFirst3rd = () => {\n      const length = this.state.newsArticles.length;\n      const one3rd = length / 3;\n      const roundedUp = Math.ceil(one3rd);\n      const first3rd = this.state.newsArticles.slice(0, roundedUp);\n      console.log(first3rd);\n      return first3rd.map(article => {\n        return /*#__PURE__*/React.createElement(NewsCard, {\n          article: article,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 14\n          }\n        });\n      });\n    };\n\n    this.renderSecond3rd = () => {\n      const length = this.state.newsArticles.length;\n      const one3rd = length / 3;\n      const roundedUp = Math.ceil(one3rd);\n      const second3rd = this.state.newsArticles.slice(roundedUp, roundedUp * 2);\n      return second3rd.map(article => {\n        return /*#__PURE__*/React.createElement(NewsCard, {\n          article: article,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 14\n          }\n        });\n      });\n    };\n\n    this.renderThird3rd = () => {\n      const length = this.state.newsArticles.length;\n      const one3rd = length / 3;\n      const roundedUp = Math.ceil(one3rd);\n      const third3rd = this.state.newsArticles.slice(roundedUp * 2, roundedUp * 3);\n      return third3rd.map(article => {\n        return /*#__PURE__*/React.createElement(NewsCard, {\n          article: article,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 14\n          }\n        });\n      });\n    };\n\n    this.handleSelect = e => {\n      if (e.target.value == 1) {\n        const ascendingArr = this.state.newsArticles.sort((a, b) => {\n          let firstDate = new Date(a.datePublished);\n          let secondDate = new Date(b.datePublished);\n          return firstDate - secondDate;\n        });\n        this.setState({\n          newsArticles: ascendingArr\n        });\n      } else {\n        const decArr = this.state.newsArticles.sort((a, b) => {\n          let firstDate = new Date(a.datePublished);\n          let secondDate = new Date(b.datePublished);\n          return secondDate - firstDate;\n        });\n        this.setState({\n          newsArticles: decArr\n        });\n      }\n    };\n\n    this.test = () => {\n      return this.state.newsArticles.map(art => {\n        return /*#__PURE__*/React.createElement(GridListTile, {\n          key: art.id,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 14\n          }\n        }, art.image.url);\n      });\n    };\n  }\n\n  componentDidMount() {\n    const token = localStorage.getItem('token');\n    console.log(token);\n\n    if (!token) {\n      this.props.history.push('/login');\n    } else {\n      const reqObj = {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      };\n      fetch('https://myclimate.herokuapp.com/current_user', reqObj).then(resp => resp.json()).then(data => {\n        console.log(data);\n        this.props.currentUser(data);\n      });\n      fetch(\"https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/Search/NewsSearchAPI?autoCorrect=false&pageNumber=1&pageSize=50&q=climate%20change&safeSearch=false\", {\n        \"method\": \"GET\",\n        \"headers\": {\n          \"x-rapidapi-host\": \"contextualwebsearch-websearch-v1.p.rapidapi.com\",\n          \"x-rapidapi-key\": \"c5855f8358mshe884588b34ae70ep1a1627jsn5e1e97c23a80\"\n        }\n      }).then(resp => resp.json()).then(news => {\n        let articlesWithImgs = news.value.filter(article => {\n          return article.image.url !== \"\";\n        });\n        this.setState({\n          newsArticles: articlesWithImgs\n        });\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        backgroundColor: '#424242',\n        color: '#FFFFFF'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(FormControl, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      style: {\n        color: 'white'\n      },\n      htmlFor: \"grouped-native-select\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 9\n      }\n    }, \"Filter By:\"), /*#__PURE__*/React.createElement(Select, {\n      style: {\n        color: 'white'\n      },\n      native: true,\n      defaultValue: \"\",\n      id: \"grouped-native-select\",\n      onChange: this.handleSelect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      \"aria-label\": \"None\",\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"optgroup\", {\n      label: \"Date Published\",\n      className: \"maybe\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: 1,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 13\n      }\n    }, \"\\u2191 Ascending (Oldest to Newest)\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: 2,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 13\n      }\n    }, \"\\u2193 Descending (Newest to Oldest)\")))), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 7\n      }\n    }, \"\\xA0\"), /*#__PURE__*/React.createElement(GridList, {\n      cols: 3,\n      cellHeight: 300,\n      spacing: 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 7\n      }\n    }, this.state.newsArticles.map(article => {\n      return /*#__PURE__*/React.createElement(GridListTile, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: article.image.url,\n        alt: article.provider.name + \" does not allow use of their image.\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 14\n        }\n      }), /*#__PURE__*/React.createElement(GridListTileBar, {\n        classes: {\n          title: {\n            display: 'none'\n          }\n        },\n        title: article.title.replace(/<(.|\\n)*?>/g, ''),\n        subtitle: /*#__PURE__*/React.createElement(\"span\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 25\n          }\n        }, \"published on: \", article.datePublished.substring(0, 10), \" by: \", article.provider.name),\n        actionIcon: /*#__PURE__*/React.createElement(IconButton, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(InfoIcon, {\n          style: {\n            color: 'rgba(255, 255, 255, 0.3)'\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 19\n          }\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 13\n        }\n      }));\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser\n  };\n};\n\nconst mapDispatchToProps = {\n  currentUser\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsFeed);","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/NewsFeed.js"],"names":["React","connect","fetchLocationsSuccess","fetchStatSuccess","fetchCitiesSuccess","currentUser","ClimateMap","Geocode","climScores","NewsCard","Grid","makeStyles","InputLabel","MenuItem","ListSubheader","FormControl","Select","GridList","GridListTile","GridListTileBar","InfoIcon","IconButton","NewsFeed","Component","state","newsArticles","renderFirst3rd","length","one3rd","roundedUp","Math","ceil","first3rd","slice","console","log","map","article","renderSecond3rd","second3rd","renderThird3rd","third3rd","handleSelect","e","target","value","ascendingArr","sort","a","b","firstDate","Date","datePublished","secondDate","setState","decArr","test","art","id","image","url","componentDidMount","token","localStorage","getItem","props","history","push","reqObj","method","headers","fetch","then","resp","json","data","news","articlesWithImgs","filter","render","backgroundColor","color","provider","name","title","display","replace","substring","mapStateToProps","auth","current_user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux'\nimport { fetchLocationsSuccess } from '../actions/location'\nimport { fetchStatSuccess } from '../actions/stat'\nimport { fetchCitiesSuccess } from '../actions/city'\nimport { currentUser } from '../actions/auth'\nimport ClimateMap from './ClimateMap'\nimport Geocode from \"react-geocode\";\nimport climScores from './climScores.json'\nimport NewsCard from './NewsCard';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\nimport GridListTileBar from '@material-ui/core/GridListTileBar'\nimport InfoIcon from '@material-ui/icons/Info';\nimport IconButton from \"@material-ui/core/IconButton\";\n\n\nclass NewsFeed extends React.Component {\n\n  state = {\n    newsArticles: []\n  }\n  \n  componentDidMount(){\n    const token = localStorage.getItem('token')\n    console.log(token)\n    if (!token) {\n      this.props.history.push('/login')\n    } else {\n      const reqObj = {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }\n      fetch('https://myclimate.herokuapp.com/current_user', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data)\n        this.props.currentUser(data)\n      })\n      fetch(\"https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/Search/NewsSearchAPI?autoCorrect=false&pageNumber=1&pageSize=50&q=climate%20change&safeSearch=false\", {\n\t      \"method\": \"GET\",\n      \t\"headers\": {\n\t    \t\"x-rapidapi-host\": \"contextualwebsearch-websearch-v1.p.rapidapi.com\",\n\t    \t\"x-rapidapi-key\": \"c5855f8358mshe884588b34ae70ep1a1627jsn5e1e97c23a80\"\n\t    }\n      })\n      .then(resp => resp.json())\n      .then(news => {\n        let articlesWithImgs = news.value.filter((article)=>{\n          return article.image.url !== \"\"\n        })\n        this.setState({\n          newsArticles: articlesWithImgs\n        })\n      })\n    }\n  }\n\n  renderFirst3rd = () => {\n    const length = this.state.newsArticles.length\n    const one3rd = length / 3\n    const roundedUp = Math.ceil(one3rd)\n    const first3rd = this.state.newsArticles.slice(0, roundedUp)\n    console.log(first3rd)\n    return first3rd.map((article)=>{\n      return <NewsCard article={article}/>\n    })\n  }\n\n  renderSecond3rd = () => {\n    const length = this.state.newsArticles.length\n    const one3rd = length / 3\n    const roundedUp = Math.ceil(one3rd)\n    const second3rd = this.state.newsArticles.slice(roundedUp, roundedUp * 2)\n    return second3rd.map((article)=>{\n      return <NewsCard article={article}/>\n    })\n  }\n\n  renderThird3rd = () => {\n    const length = this.state.newsArticles.length\n    const one3rd = length / 3\n    const roundedUp = Math.ceil(one3rd)\n    const third3rd = this.state.newsArticles.slice(roundedUp * 2, roundedUp * 3)\n    return third3rd.map((article)=>{\n      return <NewsCard article={article} />\n    })\n  }\n\n  handleSelect = (e) => {\n    if (e.target.value == 1){\n      const ascendingArr = this.state.newsArticles.sort((a, b) => {\n        let firstDate = new Date(a.datePublished)\n        let secondDate = new Date(b.datePublished)\n        return firstDate - secondDate\n      })\n      this.setState({\n        newsArticles: ascendingArr\n      })\n    } else {\n      const decArr = this.state.newsArticles.sort((a, b) => {\n        let firstDate = new Date(a.datePublished)\n        let secondDate = new Date(b.datePublished)\n        return secondDate - firstDate\n      })\n      this.setState({\n        newsArticles: decArr\n      })\n    }\n  }\n\n  test = () => {\n    return this.state.newsArticles.map((art)=>{\n      return <GridListTile key={art.id}>\n      {art.image.url}\n    </GridListTile>\n    })\n  }\n\n  render(){ \n      return (\n        <div style={{backgroundColor: '#424242', color: '#FFFFFF'}}>\n          {/* <h2>Unfortunately the News API ‘production plan’ is too expensive for me to include it on this production app. However, an alternative news API source is coming very soon! </h2> */}\n        <FormControl>\n        <InputLabel style={{color:'white'}} htmlFor=\"grouped-native-select\">Filter By:</InputLabel>\n        <Select style={{color:'white'}} native defaultValue=\"\" id=\"grouped-native-select\" onChange={this.handleSelect}>\n          <option aria-label=\"None\" value=\"\" />\n          <optgroup label=\"Date Published\" className='maybe'>\n            <option value={1}>↑ Ascending (Oldest to Newest)</option>\n            <option value={2}>↓ Descending (Newest to Oldest)</option>\n          </optgroup>\n        </Select>\n      </FormControl>\n      <p>&nbsp;</p>\n      <GridList cols={3} cellHeight={300} spacing={0}>\n        {this.state.newsArticles.map(article => {\n          return <GridListTile>\n            {<img src={article.image.url} alt={article.provider.name + \" does not allow use of their image.\"}></img>}\n            <GridListTileBar classes={{title: {display: 'none'}}}\n              title={article.title.replace(/<(.|\\n)*?>/g, '')}\n              subtitle={<span>published on: {article.datePublished.substring(0, 10)} by: {article.provider.name}</span>}\n              actionIcon={\n                <IconButton >\n                  <InfoIcon style={{color: 'rgba(255, 255, 255, 0.3)'}}/> \n                </IconButton>\n              }\n            />\n            {/* <NewsCard article={article} /> */}\n          </GridListTile>\n        })}\n        {/* {this.test()} */}\n      </GridList>\n          {/* <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"flex-start\"\n            spacing={0}\n            >\n          <Grid item xs>\n            {this.renderFirst3rd()}\n            </Grid>\n            <Grid item xs>\n            {this.renderSecond3rd()}\n            </Grid>\n            <Grid item xs>\n            {this.renderThird3rd()}\n            </Grid>\n\n\n          </Grid> */}\n        </div>)\n  };\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser,\n  }\n}\n\nconst mapDispatchToProps = {\n  currentUser\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsFeed);\n\n\n"]},"metadata":{},"sourceType":"module"}