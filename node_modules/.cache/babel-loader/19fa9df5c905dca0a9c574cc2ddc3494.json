{"ast":null,"code":"import _classCallCheck from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{connect}from'react-redux';import{fetchLocationsSuccess}from'../actions/location';import{fetchStatSuccess}from'../actions/stat';import{fetchCitiesSuccess}from'../actions/city';import{currentUser}from'../actions/auth';import ClimateMap from'./ClimateMap';import Geocode from\"react-geocode\";import climScores from'./climScores.json';import NewsCard from'./NewsCard';import Grid from'@material-ui/core/Grid';import{makeStyles}from'@material-ui/core/styles';import InputLabel from'@material-ui/core/InputLabel';import MenuItem from'@material-ui/core/MenuItem';import ListSubheader from'@material-ui/core/ListSubheader';import FormControl from'@material-ui/core/FormControl';import Select from'@material-ui/core/Select';var NewsFeed=/*#__PURE__*/function(_React$Component){_inherits(NewsFeed,_React$Component);var _super=_createSuper(NewsFeed);function NewsFeed(){var _this;_classCallCheck(this,NewsFeed);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={newsArticles:[]};_this.renderFirst3rd=function(){var length=_this.state.newsArticles.length;var one3rd=length/3;var roundedUp=Math.ceil(one3rd);var first3rd=_this.state.newsArticles.slice(0,roundedUp);console.log(first3rd);return first3rd.map(function(article){return/*#__PURE__*/React.createElement(NewsCard,{article:article});});};_this.renderSecond3rd=function(){var length=_this.state.newsArticles.length;var one3rd=length/3;var roundedUp=Math.ceil(one3rd);var second3rd=_this.state.newsArticles.slice(roundedUp,roundedUp*2);return second3rd.map(function(article){return/*#__PURE__*/React.createElement(NewsCard,{article:article});});};_this.renderThird3rd=function(){var length=_this.state.newsArticles.length;var one3rd=length/3;var roundedUp=Math.ceil(one3rd);var third3rd=_this.state.newsArticles.slice(roundedUp*2,roundedUp*3);return third3rd.map(function(article){return/*#__PURE__*/React.createElement(NewsCard,{article:article});});};_this.handleSelect=function(e){if(e.target.value==1){var ascendingArr=_this.state.newsArticles.sort(function(a,b){var firstDate=new Date(a.publishedAt);var secondDate=new Date(b.publishedAt);return firstDate-secondDate;});_this.setState({newsArticles:ascendingArr});}else{var decArr=_this.state.newsArticles.sort(function(a,b){var firstDate=new Date(a.publishedAt);var secondDate=new Date(b.publishedAt);return secondDate-firstDate;});_this.setState({newsArticles:decArr});}};return _this;}_createClass(NewsFeed,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var token=localStorage.getItem('token');console.log(token);if(!token){this.props.history.push('/login');}else{var reqObj={method:'GET',headers:{'Authorization':\"Bearer \".concat(token)}};fetch('http://localhost:3001/current_user',reqObj).then(function(resp){return resp.json();}).then(function(data){console.log(data);_this2.props.currentUser(data);});fetch(\"https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/Search/NewsSearchAPI?autoCorrect=false&pageNumber=1&pageSize=10&q=climate%20change&safeSearch=false\",{\"method\":\"GET\",\"headers\":{\"x-rapidapi-host\":\"contextualwebsearch-websearch-v1.p.rapidapi.com\",\"x-rapidapi-key\":\"c5855f8358mshe884588b34ae70ep1a1627jsn5e1e97c23a80\"}}).then(function(resp){return resp.json();}).then(function(data){return console.log(data);});fetch('https://newsapi.org/v2/everything?q=climate%20change&apiKey=cdcfd508f0a3409cb71b20f0d5bba38e').then(function(resp){return resp.json();}).then(function(news){console.log(news.articles);_this2.setState({newsArticles:news.articles});});}}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{style:{backgroundColor:'#424242'}},/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{style:{color:'white'},htmlFor:\"grouped-native-select\"},\"Filter By:\"),/*#__PURE__*/React.createElement(Select,{style:{color:'white'},native:true,defaultValue:\"\",id:\"grouped-native-select\",onChange:this.handleSelect},/*#__PURE__*/React.createElement(\"option\",{\"aria-label\":\"None\",value:\"\"}),/*#__PURE__*/React.createElement(\"optgroup\",{label:\"Date Published\",className:\"maybe\"},/*#__PURE__*/React.createElement(\"option\",{value:1},\"\\u2191 Ascending (Oldest to Newest)\"),/*#__PURE__*/React.createElement(\"option\",{value:2},\"\\u2193 Descending (Newest to Oldest)\")))),/*#__PURE__*/React.createElement(\"p\",null,\"\\xA0\"),/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",justify:\"flex-start\",alignItems:\"flex-start\",spacing:0},/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},this.renderFirst3rd()),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},this.renderSecond3rd()),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},this.renderThird3rd())));}}]);return NewsFeed;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth,current_user:state.currentUser};};var mapDispatchToProps={currentUser:currentUser};export default connect(mapStateToProps,mapDispatchToProps)(NewsFeed);","map":{"version":3,"sources":["/Users/johnloberger/Flatiron/code/mod5/MyClimateFrontend/src/components/NewsFeed.js"],"names":["React","connect","fetchLocationsSuccess","fetchStatSuccess","fetchCitiesSuccess","currentUser","ClimateMap","Geocode","climScores","NewsCard","Grid","makeStyles","InputLabel","MenuItem","ListSubheader","FormControl","Select","NewsFeed","state","newsArticles","renderFirst3rd","length","one3rd","roundedUp","Math","ceil","first3rd","slice","console","log","map","article","renderSecond3rd","second3rd","renderThird3rd","third3rd","handleSelect","e","target","value","ascendingArr","sort","a","b","firstDate","Date","publishedAt","secondDate","setState","decArr","token","localStorage","getItem","props","history","push","reqObj","method","headers","fetch","then","resp","json","data","news","articles","backgroundColor","color","Component","mapStateToProps","auth","current_user","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux'\nimport { fetchLocationsSuccess } from '../actions/location'\nimport { fetchStatSuccess } from '../actions/stat'\nimport { fetchCitiesSuccess } from '../actions/city'\nimport { currentUser } from '../actions/auth'\nimport ClimateMap from './ClimateMap'\nimport Geocode from \"react-geocode\";\nimport climScores from './climScores.json'\nimport NewsCard from './NewsCard';\nimport Grid from '@material-ui/core/Grid';\nimport { makeStyles } from '@material-ui/core/styles';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport ListSubheader from '@material-ui/core/ListSubheader';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\n\nclass NewsFeed extends React.Component {\n\n  state = {\n    newsArticles: []\n  }\n  \n  componentDidMount(){\n    const token = localStorage.getItem('token')\n    console.log(token)\n    if (!token) {\n      this.props.history.push('/login')\n    } else {\n      const reqObj = {\n        method: 'GET',\n        headers: {\n          'Authorization': `Bearer ${token}`\n        }\n      }\n      fetch('http://localhost:3001/current_user', reqObj)\n      .then(resp => resp.json())\n      .then(data => {\n        console.log(data)\n        this.props.currentUser(data)\n      })\n      fetch(\"https://contextualwebsearch-websearch-v1.p.rapidapi.com/api/Search/NewsSearchAPI?autoCorrect=false&pageNumber=1&pageSize=10&q=climate%20change&safeSearch=false\", {\n\t\"method\": \"GET\",\n\t\"headers\": {\n\t\t\"x-rapidapi-host\": \"contextualwebsearch-websearch-v1.p.rapidapi.com\",\n\t\t\"x-rapidapi-key\": \"c5855f8358mshe884588b34ae70ep1a1627jsn5e1e97c23a80\"\n\t}\n})\n.then(resp => resp.json())\n.then(data => console.log(data))\n      fetch('https://newsapi.org/v2/everything?q=climate%20change&apiKey=cdcfd508f0a3409cb71b20f0d5bba38e')  \n      .then(resp => resp.json())\n      .then(news => {\n        console.log(news.articles)\n        this.setState({\n          newsArticles: news.articles\n        })\n      })\n    }\n  }\n\n  renderFirst3rd = () => {\n    const length = this.state.newsArticles.length\n    const one3rd = length / 3\n    const roundedUp = Math.ceil(one3rd)\n    const first3rd = this.state.newsArticles.slice(0, roundedUp)\n    console.log(first3rd)\n    return first3rd.map((article)=>{\n      return <NewsCard article={article}/>\n    })\n  }\n\n  renderSecond3rd = () => {\n    const length = this.state.newsArticles.length\n    const one3rd = length / 3\n    const roundedUp = Math.ceil(one3rd)\n    const second3rd = this.state.newsArticles.slice(roundedUp, roundedUp * 2)\n    return second3rd.map((article)=>{\n      return <NewsCard article={article}/>\n    })\n  }\n\n  renderThird3rd = () => {\n    const length = this.state.newsArticles.length\n    const one3rd = length / 3\n    const roundedUp = Math.ceil(one3rd)\n    const third3rd = this.state.newsArticles.slice(roundedUp * 2, roundedUp * 3)\n    return third3rd.map((article)=>{\n      return <NewsCard article={article} />\n    })\n  }\n\n  handleSelect = (e) => {\n    if (e.target.value == 1){\n      const ascendingArr = this.state.newsArticles.sort((a, b) => {\n        let firstDate = new Date(a.publishedAt)\n        let secondDate = new Date(b.publishedAt)\n        return firstDate - secondDate\n      })\n      this.setState({\n        newsArticles: ascendingArr\n      })\n    } else {\n      const decArr = this.state.newsArticles.sort((a, b) => {\n        let firstDate = new Date(a.publishedAt)\n        let secondDate = new Date(b.publishedAt)\n        return secondDate - firstDate\n      })\n      this.setState({\n        newsArticles: decArr\n      })\n    }\n  }\n\n  render(){ \n      return (\n        <div style={{backgroundColor: '#424242'}}>\n        <FormControl>\n        <InputLabel style={{color:'white'}} htmlFor=\"grouped-native-select\">Filter By:</InputLabel>\n        <Select style={{color:'white'}} native defaultValue=\"\" id=\"grouped-native-select\" onChange={this.handleSelect}>\n          <option aria-label=\"None\" value=\"\" />\n          <optgroup label=\"Date Published\" className='maybe'>\n            <option value={1}>↑ Ascending (Oldest to Newest)</option>\n            <option value={2}>↓ Descending (Newest to Oldest)</option>\n          </optgroup>\n        </Select>\n      </FormControl>\n      <p>&nbsp;</p>\n          <Grid\n            container\n            direction=\"row\"\n            justify=\"flex-start\"\n            alignItems=\"flex-start\"\n            spacing={0}\n            >\n          <Grid item xs>\n            {this.renderFirst3rd()}\n            </Grid>\n            <Grid item xs>\n            {this.renderSecond3rd()}\n            </Grid>\n            <Grid item xs>\n            {this.renderThird3rd()}\n            </Grid>\n\n\n          </Grid>\n        </div>)\n  };\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    auth: state.auth,\n    current_user: state.currentUser,\n  }\n}\n\nconst mapDispatchToProps = {\n  currentUser\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewsFeed);\n\n\n"]},"metadata":{},"sourceType":"module"}